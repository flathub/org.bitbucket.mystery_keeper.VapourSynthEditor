name: VapourSynth
config-opts:
  - --with-python-prefix=${FLATPAK_DEST}

modules:
  - name: libass
    config-opts:
      - --disable-static
      - --enable-asm
      - --enable-harfbuzz
      - --enable-fontconfig
    sources:
      - type: archive
        url: https://github.com/libass/libass/releases/download/0.17.2/libass-0.17.2.tar.xz
        sha256: e8261b51d66ba933fe99248c6fdd8767ed96c5a7e5363c83992c735a2c2fbf74
        x-checker-data:
          type: anitya
          project-id: 1560
          stable-only: true
          url-template: https://github.com/libass/libass/releases/download/$version/libass-$version.tar.xz
      - type: script
        dest-filename: autogen.sh
        commands:
          - autoreconf -fiv

  - name: zimg
    config-opts:
      - --disable-static
    sources:
      - type: archive
        url: https://github.com/sekrit-twc/zimg/archive/release-3.0.5.tar.gz
        sha256: a9a0226bf85e0d83c41a8ebe4e3e690e1348682f6a2a7838f1b8cbff1b799bcf
        x-checker-data:
          type: anitya
          project-id: 13685
          stable-only: true
          url-template: https://github.com/sekrit-twc/zimg/archive/release-$version.tar.gz
    cleanup:
      - /share/doc

  - name: Tesseract
    config-opts:
      - --disable-static
    modules:
      - name: Leptonica
        config-opts:
          - --disable-static
          - --with-pic
        sources:
          - type: archive
            url: http://www.leptonica.org/source/leptonica-1.84.1.tar.gz
            sha256: 2b3e1254b1cca381e77c819b59ca99774ff43530209b9aeb511e1d46588a64f6
            x-checker-data:
              type: anitya
              project-id: 1549
              stable-only: true
              url-template: http://www.leptonica.org/source/leptonica-$version.tar.gz
        cleanup:
          - /bin
    sources:
      - type: git
        url: https://github.com/tesseract-ocr/tesseract.git
        tag: 5.4.0
        commit: 1be261dc226d49bdcad0ab2fcb10f8395edc1225
        x-checker-data:
          type: json
          url: https://api.github.com/repos/tesseract-ocr/tesseract/releases/latest
          timestamp-query: .published_at
          tag-query: .tag_name
          version-query: .tag_name
    cleanup:
      - /bin

  - name: ImageMagick
    config-opts:
      - --disable-static
      - --disable-docs
      - --with-hdri
      - --with-pic
    sources:
      - type: archive
        url: https://github.com/ImageMagick/ImageMagick/archive/7.1.1-33.tar.gz
        sha256: 3fe527ce04ee5485dc6f7726eccd05c962add5c5d91843c5abf6c608e4f55330
        x-checker-data:
          type: anitya
          project-id: 1372
          stable-only: true
          url-template: https://github.com/ImageMagick/ImageMagick/archive/$version.tar.gz
    cleanup:
      - /bin
      - /etc
      - /lib/ImageMagick*
      - /share/ImageMagick*
sources:
  - type: archive
    url: https://github.com/vapoursynth/vapoursynth/archive/R60.tar.gz
    sha256: d0ff9b7d88d4b944d35dd7743d72ffcea5faa687f6157b160f57be45f4403a30
    x-checker-data:
      type: anitya
      project-id: 15982
      stable-only: true
      url-template: https://github.com/vapoursynth/vapoursynth/archive/$version.tar.gz
