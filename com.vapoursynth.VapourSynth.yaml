name: VapourSynth
modules:
  - name: Cython
    buildsystem: simple
    build-commands:
      - python3 setup.py install --prefix="${FLATPAK_DEST}" --optimize=1
    sources:
      - type: archive
        url: https://github.com/cython/cython/archive/0.29.13.tar.gz
        sha256: af71d040fa9fa1af0ea2b7a481193776989ae93ae828eb018416cac771aef07f
    cleanup: ['*']

  - name: libass
    config-opts:
      - --disable-static
      - --enable-asm
      - --enable-harfbuzz
      - --enable-fontconfig
    sources:
      - type: archive
        url: https://github.com/libass/libass/releases/download/0.14.0/libass-0.14.0.tar.xz
        sha256: 881f2382af48aead75b7a0e02e65d88c5ebd369fe46bc77d9270a94aa8fd38a2
      - type: script
        dest-filename: autogen.sh
        commands:
          - autoreconf -fiv

  - name: zimg
    config-opts:
      - --disable-static
    sources:
      - type: archive
        url: https://github.com/sekrit-twc/zimg/archive/release-2.9.2.tar.gz
        sha256: 10403c2964fe11b559a7ec5e081c358348fb787e26b91ec0d1f9dd7c01d1cd7b
    cleanup:
      - /share/doc

  - name: Tesseract
    config-opts:
      - --disable-static
    modules:
      - name: Leptonica
        config-opts:
          - --disable-static
          - --with-pic
        sources:
          - type: archive
            url: http://www.leptonica.org/source/leptonica-1.78.0.tar.gz
            sha256: e2ed2e81e7a22ddf45d2c05f0bc8b9ae7450545d995bfe28517ba408d14a5a88
        cleanup:
          - /bin
    sources:
      - type: archive
        url: https://github.com/tesseract-ocr/tesseract/archive/4.1.0.tar.gz
        sha256: 5c5ed5f1a76888dc57a83704f24ae02f8319849f5c4cf19d254296978a1a1961
    cleanup:
      - /bin

  - name: ImageMagick
    config-opts:
      - --disable-static
      - --disable-docs
      - --with-hdri
      - --with-pic
    sources:
      - type: archive
        url: https://github.com/ImageMagick/ImageMagick/archive/7.0.8-65.tar.gz
        sha256: 14afaf722d8964ed8de2ebd8184a229e521f1425e18e7274806f06e008bf9aa7
    cleanup:
      - /bin
      - /etc
      - /lib/ImageMagick*
      - /share/ImageMagick*
sources:
  - type: archive
    url: https://github.com/vapoursynth/vapoursynth/archive/R47.1.tar.gz
    sha256: 095509b088ed1c3ba452ee0fed4a5f134719ac817ffc594f79557f499ad9fa6b
